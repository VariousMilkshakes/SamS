var del = require('../../lib-cov/commands/delete');
var nock = require('nock');
var OIO_URL = 'https://api.orchestrate.io';
var assert = require('assert');

describe('delete', function () {
  afterEach(function () {
    nock.cleanAll();
  });

  it('should delete a key with two arguments', function (done) {
    var scope = nock(OIO_URL)
    .delete('/v0/users/garbados')
    .reply(200);

    del(['users', 'garbados'], {})
    .then(function () {
      assert(scope.isDone());
      done();
    });
  });

  it('should delete a collection with one', function (done) {
    var scope = nock(OIO_URL)
    .delete('/v0/users?force=true')
    .reply(200);

    del(['users'], {})
    .then(function () {
      assert(scope.isDone());
      done();
    });
  });
});
