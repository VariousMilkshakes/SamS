var assert = require('assert');
var stdin = require('../lib-cov/stdin');
var fs = require('fs');

describe('stdin', function () {
  describe('get', function () {
    it('should concat a stream', function (done) {
      var FILE = 'readme.md';
      var stream = fs.createReadStream(FILE);
      var text = fs.readFileSync(FILE, 'utf-8');

      stdin
      .get(stream)
      .then(function (result) {
        assert(result === text);
        done();
      })
      .fail(done);
    });

    it("unless it's a TTY", function (done) {
      var stream = { isTTY: true };

      stdin
      .get(stream)
      .then(function (result) {
        assert(result === null);
        done();
      })
      .fail(done);
    });
  });
});
